<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reto de Normalización: Academia Tech</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .code-font { font-family: 'Fira Code', monospace; }
        .gradient-bg { background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); }
    </style>
</head>
<body class="bg-gray-50 font-sans text-gray-900">

    <header class="gradient-bg text-white py-12 px-6 shadow-xl">
        <div class="max-w-4xl mx-auto text-center">
            <h1 class="text-4xl font-bold mb-4"><i class="fa-solid fa-database mr-3 text-blue-400"></i>Reto: El Caos de la Academia Tech</h1>
            <p class="text-blue-200 text-lg">Laboratorio Práctico de Normalización de Bases de Datos (1FN a 5FN)</p>
        </div>
    </header>

    <main class="max-w-5xl mx-auto py-10 px-6">
        
        <div class="bg-blue-50 border-l-4 border-blue-500 p-6 mb-10 rounded-r-lg">
            <h2 class="text-xl font-bold text-blue-800 mb-2">Instrucciones</h2>
            <p class="text-blue-700">Analiza cada nivel, identifica la anomalía y redacta el script SQL para corregirlo en tu consola de <strong>Neon.tech</strong>. Al finalizar cada sección, puedes desplegar la solución para comparar.</p>
        </div>

        <div id="challenges-container" class="space-y-12">
            
            <section class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-200">
                <div class="bg-gray-800 text-white px-6 py-4 flex justify-between items-center">
                    <h3 class="font-bold text-lg">Nivel 1: Problemas de Atomicidad (1FN)</h3>
                    <span class="bg-blue-600 text-xs px-3 py-1 rounded-full uppercase">Fácil</span>
                </div>
                <div class="p-6">
                    <p class="mb-4 font-medium text-gray-700">Situación: La tabla actual guarda múltiples cursos en un solo campo de texto.</p>
                    <div class="bg-gray-100 p-4 rounded-lg mb-4 overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead><tr class="border-bottom"><th>id_est</th><th>nombre</th><th class="text-red-600">cursos (Error)</th></tr></thead>
                            <tbody><tr><td>1</td><td>Ana García</td><td>SQL, Python, Java</td></tr></tbody>
                        </table>
                    </div>
                    <p class="text-sm text-gray-600 mb-6 italic">Reto: Crea el DDL y DML necesario para que la tabla cumpla la 1FN.</p>
                    
                    <button onclick="toggleSolution('sol1')" class="text-blue-600 font-bold hover:underline">
                        <i class="fa-solid fa-eye mr-1"></i> Ver Justificación y Solución
                    </button>
                    
                    <div id="sol1" class="hidden mt-6 bg-green-50 p-6 rounded-lg border border-green-200">
                        <h4 class="font-bold text-green-800 mb-2">Justificación:</h4>
                        <p class="text-green-700 mb-4 text-sm font-light">La 1FN prohíbe grupos repetitivos. Cada celda debe ser atómica para permitir filtrar por cursos individuales.</p>
                        <pre class="bg-gray-900 text-blue-300 p-4 rounded text-xs overflow-x-auto code-font">
CREATE TABLE Estudiantes_1FN (
    id_est INT,
    nombre TEXT,
    materia TEXT,
    PRIMARY KEY (id_est, materia)
);

INSERT INTO Estudiantes_1FN VALUES (1, 'Ana García', 'SQL'), (1, 'Ana García', 'Python');</pre>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-200">
                <div class="bg-gray-800 text-white px-6 py-4 flex justify-between items-center">
                    <h3 class="font-bold text-lg">Nivel 2: Dependencia Parcial (2FN)</h3>
                    <span class="bg-yellow-600 text-xs px-3 py-1 rounded-full uppercase">Medio</span>
                </div>
                <div class="p-6">
                    <p class="mb-4 font-medium text-gray-700">Situación: En la tabla de 1FN, el "nombre" depende solo del ID, pero no de la "materia".</p>
                    <p class="text-sm text-gray-600 mb-6 italic">Reto: Descompón la tabla para evitar que los datos del alumno se repitan por cada curso.</p>
                    
                    <button onclick="toggleSolution('sol2')" class="text-blue-600 font-bold hover:underline">
                        <i class="fa-solid fa-eye mr-1"></i> Ver Justificación y Solución
                    </button>
                    
                    <div id="sol2" class="hidden mt-6 bg-green-50 p-6 rounded-lg border border-green-200">
                        <h4 class="font-bold text-green-800 mb-2">Justificación:</h4>
                        <p class="text-green-700 mb-4 text-sm font-light">La 2FN elimina dependencias parciales de una llave compuesta. El nombre debe vivir en su propia tabla de Entidad.</p>
                        <pre class="bg-gray-900 text-blue-300 p-4 rounded text-xs overflow-x-auto code-font">
CREATE TABLE Estudiantes (id_est PRIMARY KEY, nombre TEXT);
CREATE TABLE Inscripciones (id_est INT REFERENCES Estudiantes, materia TEXT);</pre>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-xl shadow-md overflow-hidden border border-gray-200">
                <div class="bg-gray-800 text-white px-6 py-4 flex justify-between items-center">
                    <h3 class="font-bold text-lg">Nivel 3: El Salto a la 3FN</h3>
                    <span class="bg-orange-600 text-xs px-3 py-1 rounded-full uppercase">Avanzado</span>
                </div>
                <div class="p-6">
                    <p class="mb-4 font-medium text-gray-700">Situación: Tienes una tabla Cursos con: [Nombre_Curso, Profesor, Oficina_Profesor].</p>
                    <p class="text-sm text-gray-600 mb-6 italic text-red-500">¡Cuidado! Si el profesor Smith cambia de oficina, ¿cuántos registros debes actualizar?</p>
                    
                    <button onclick="toggleSolution('sol3')" class="text-blue-600 font-bold hover:underline">
                        <i class="fa-solid fa-eye mr-1"></i> Ver Justificación y Solución
                    </button>
                    
                    <div id="sol3" class="hidden mt-6 bg-green-50 p-6 rounded-lg border border-green-200">
                        <h4 class="font-bold text-green-800 mb-2">Justificación:</h4>
                        <p class="text-green-700 mb-4 text-sm font-light">Se elimina la dependencia transitiva. La oficina depende del profesor, no del curso. Creamos la tabla 'Profesores'.</p>
                        <pre class="bg-gray-900 text-blue-300 p-4 rounded text-xs overflow-x-auto code-font">
CREATE TABLE Profesores (nombre TEXT PRIMARY KEY, oficina TEXT);
ALTER TABLE Cursos DROP COLUMN oficina_profesor;</pre>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="bg-gray-900 text-gray-400 py-8 text-center border-t border-gray-800">
        <p>Desarrollado para la Clase de Ingeniería de Datos 2026</p>
        <p class="text-xs mt-2 italic text-gray-600 italic">"Los datos son el nuevo petróleo, pero la normalización es la refinería."</p>
    </footer>

    <script>
        function toggleSolution(id) {
            const el = document.getElementById(id);
            el.classList.toggle('hidden');
        }
    </script>
</body>
</html>
