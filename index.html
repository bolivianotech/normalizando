<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reto de Normalización: UPDS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .code-font { font-family: 'Fira Code', monospace; }
        .gradient-bg { background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 100%); }
        .solution-content { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 font-sans text-slate-900">

    <header class="gradient-bg text-white py-14 px-6 shadow-2xl">
        <div class="max-w-4xl mx-auto text-center">
            <div class="mb-4 inline-block p-3 bg-blue-500/20 rounded-full">
                <i class="fa-solid fa-layer-group text-4xl text-blue-300"></i>
            </div>
            <h1 class="text-4xl font-extrabold mb-4 tracking-tight">Mastering Normalization</h1>
            <p class="text-blue-100 text-xl font-light">Laboratorio de Normalización Avanzada: De 1FN a 5FN</p>
            <p class="mt-2 text-blue-300 font-medium">Universidad Privada Domingo Savio</p>
        </div>
    </header>

    <main class="max-w-5xl mx-auto py-12 px-6">
        
        <div class="bg-white border-l-4 border-blue-600 p-6 mb-12 shadow-sm rounded-r-xl">
            <h2 class="text-xl font-bold text-slate-800 mb-2 italic">Desafío Académico</h2>
            <p class="text-slate-600">Para cada nivel, analiza la estructura propuesta en el DDL y aplica la descomposición necesaria. Recuerda que cada forma normal superior requiere que se cumplan las anteriores.</p>
        </div>

        <div id="challenges-container" class="space-y-10">
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <div class="bg-white p-6 rounded-xl shadow border-t-4 border-blue-400">
                    <h4 class="font-bold text-blue-800">1FN, 2FN y 3FN</h4>
                    <p class="text-sm text-gray-500 mt-2">Asegura atomicidad, elimina dependencias parciales y transitivas. ¡Fundamentos listos!</p>
                </div>
                <div class="bg-white p-6 rounded-xl shadow border-t-4 border-indigo-400">
                    <h4 class="font-bold text-indigo-800 text-center italic">"Cuidado con los determinantes"</h4>
                </div>
                <div class="bg-white p-6 rounded-xl shadow border-t-4 border-purple-400 text-right">
                    <h4 class="font-bold text-purple-800 text-sm">Base de Datos II</h4>
                </div>
            </div>

            <section class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
                <div class="bg-indigo-700 text-white px-8 py-5 flex justify-between items-center">
                    <h3 class="font-bold text-xl uppercase tracking-wider">Nivel 4: Forma Normal de Boyce-Codd</h3>
                    <span class="bg-indigo-900/50 text-xs px-4 py-1.5 rounded-full">Expert</span>
                </div>
                <div class="p-8">
                    <p class="mb-4 text-slate-700 leading-relaxed"><strong>Escenario:</strong> Una tabla de Tutorías <code>(Estudiante, Materia, Tutor)</code>. <br>Regla: Un tutor solo enseña una materia, pero una materia tiene muchos tutores.</p>
                    <p class="text-red-500 text-sm font-semibold mb-6">Problema: El Tutor (determinante) no es una Llave Candidata.</p>
                    
                    <button onclick="toggleSolution('solBCNF')" class="bg-indigo-50 text-indigo-700 px-6 py-2 rounded-lg font-bold hover:bg-indigo-100 transition">
                        Revelar Solución BCNF
                    </button>
                    
                    <div id="solBCNF" class="hidden mt-6 bg-slate-900 text-indigo-300 p-6 rounded-xl solution-content">
                        <h4 class="text-white font-bold mb-3 underline">Justificación:</h4>
                        <p class="text-sm mb-4">Para estar en BCNF, todo determinante debe ser una llave candidata. Aquí <code>Tutor -> Materia</code>, pero Tutor no es llave sola.</p>
                        <pre class="code-font text-xs leading-relaxed">
-- Separamos la responsabilidad del tutor
CREATE TABLE Asignacion_Tutor (
    tutor_id INT PRIMARY KEY,
    materia TEXT
);

-- La tutoría ahora vincula al estudiante con el tutor
CREATE TABLE Sesiones_Tutor (
    estudiante_id INT,
    tutor_id INT REFERENCES Asignacion_Tutor,
    PRIMARY KEY (estudiante_id, tutor_id)
);</pre>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
                <div class="bg-purple-700 text-white px-8 py-5 flex justify-between items-center">
                    <h3 class="font-bold text-xl uppercase tracking-wider">Nivel 5: Cuarta Forma Normal</h3>
                    <span class="bg-purple-900/50 text-xs px-4 py-1.5 rounded-full">Pro</span>
                </div>
                <div class="p-8">
                    <p class="mb-4 text-slate-700"><strong>Escenario:</strong> Un profesor imparte varios <code>Cursos</code> y posee varios <code>Títulos Académicos</code>. Ambos son independientes entre sí.</p>
                    <p class="bg-purple-50 text-purple-700 p-3 rounded text-sm italic mb-6">Si un profesor tiene 3 cursos y 2 títulos, ¿cuántas filas necesitas para cubrir todas las combinaciones en una sola tabla? (Respuesta: 6 filas, ¡demasiada redundancia!).</p>
                    
                    <button onclick="toggleSolution('sol4FN')" class="bg-purple-50 text-purple-700 px-6 py-2 rounded-lg font-bold hover:bg-purple-100 transition">
                        Revelar Solución 4FN
                    </button>
                    
                    <div id="sol4FN" class="hidden mt-6 bg-slate-900 text-purple-300 p-6 rounded-xl solution-content">
                        <h4 class="text-white font-bold mb-3 underline">Justificación:</h4>
                        <p class="text-sm mb-4">La 4FN elimina las Dependencias Multivaluadas. Los hechos independientes deben vivir en tablas separadas.</p>
                        <pre class="code-font text-xs leading-relaxed">
-- Descomposición en dos tablas independientes
CREATE TABLE Profesor_Cursos (
    prof_id INT,
    curso_id INT,
    PRIMARY KEY (prof_id, curso_id)
);

CREATE TABLE Profesor_Titulos (
    prof_id INT,
    titulo TEXT,
    PRIMARY KEY (prof_id, titulo)
);</pre>
                    </div>
                </div>
            </section>

            <section class="bg-white rounded-2xl shadow-lg border border-slate-200 overflow-hidden">
                <div class="bg-rose-700 text-white px-8 py-5 flex justify-between items-center">
                    <h3 class="font-bold text-xl uppercase tracking-wider">Nivel 6: Quinta Forma Normal</h3>
                    <span class="bg-rose-900/50 text-xs px-4 py-1.5 rounded-full">Legendary</span>
                </div>
                <div class="p-8">
                    <p class="mb-4 text-slate-700 leading-relaxed"><strong>Escenario:</strong> Existe una relación ternaria entre <code>Proveedor</code>, <code>Producto</code> y <code>Proyecto</code>. Un proveedor suministra un producto a un proyecto <strong>solo si</strong> tiene permiso para ese producto Y ese proyecto.</p>
                    
                    <button onclick="toggleSolution('sol5FN')" class="bg-rose-50 text-rose-700 px-6 py-2 rounded-lg font-bold hover:bg-rose-100 transition">
                        Revelar Solución 5FN (Join-Project)
                    </button>
                    
                    <div id="sol5FN" class="hidden mt-6 bg-slate-900 text-rose-300 p-6 rounded-xl solution-content">
                        <h4 class="text-white font-bold mb-3 underline">Justificación:</h4>
                        <p class="text-sm mb-4">La 5FN se alcanza cuando la tabla no puede descomponerse más sin perder información, o se descompone en 3 tablas para evitar "filas fantasma" en relaciones cíclicas.</p>
                        <pre class="code-font text-xs leading-relaxed">
-- Reconstrucción mediante 3 tablas (Relación Cíclica)
CREATE TABLE Prov_Prod (prov_id INT, prod_id INT, PRIMARY KEY(prov_id, prod_id));
CREATE TABLE Prod_Proj (prod_id INT, proj_id INT, PRIMARY KEY(prod_id, proj_id));
CREATE TABLE Prov_Proj (prov_id INT, proj_id INT, PRIMARY KEY(prov_id, proj_id));</pre>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="bg-slate-900 text-slate-400 py-12 px-6 text-center border-t border-slate-800">
        <div class="max-w-4xl mx-auto">
            <p class="text-lg font-semibold text-slate-200">Base de Datos II</p>
            <p class="text-md mb-4 text-blue-400">Universidad Privada Domingo Savio</p>
            <div class="flex justify-center space-x-6 mb-6">
                <i class="fa-solid fa-code hover:text-white cursor-pointer"></i>
                <i class="fa-solid fa-server hover:text-white cursor-pointer"></i>
                <i class="fa-solid fa-brain hover:text-white cursor-pointer"></i>
            </div>
            <p class="text-xs uppercase tracking-widest text-slate-500">© 2026 Material Didáctico para Estudiantes de Ingeniería</p>
        </div>
    </footer>

    <script>
        function toggleSolution(id) {
            const el = document.getElementById(id);
            const isHidden = el.classList.contains('hidden');
            
            // Cerrar otras soluciones si se desea (opcional)
            // document.querySelectorAll('.solution-content').forEach(s => s.classList.add('hidden'));

            if (isHidden) {
                el.classList.remove('hidden');
            } else {
                el.classList.add('hidden');
            }
        }
    </script>
</body>
</html>
